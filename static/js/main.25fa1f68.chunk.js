(window.webpackJsonpfirst=window.webpackJsonpfirst||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),c=n.n(i),l=n(4),o=n.n(l),u=(n(16),n(2)),s=n(5),f=n(1),m=(n(17),n(18),n(19),n(20),["transparent","red","orange"]),d=function(e){var t=e.val,n=e.pulse,a=void 0!==n&&n,r={backgroundColor:m[Math.abs(t)],opacity:t<0?.3:1},i="circle";return a&&(i+=" pulseAnimation"),c.a.createElement("div",{className:"cell"},c.a.createElement("div",{style:r,className:i}))},v=function(e){var t=e.data,n=e.columnAction,a=e.id,r=e.cellsToPulse;return c.a.createElement("div",{onClick:function(){return n(a,"action")},onMouseEnter:function(){return n(a,"hint")},onMouseLeave:function(){return n(a,"hideHint")},onTouchStart:function(){return n(a,"hint")},className:"column"},t.map((function(e,t){return c.a.createElement(d,{key:a.toString()+t.toString(),val:e,pulse:-1!==r.findIndex((function(e){return e[1]===t}))})})))},p=(n(21),function(e){var t,n=e.winner,a=e.currentPlayer,r=e.exitGame,i=e.style;switch(n){case-1:t="\u0421\u0435\u0439\u0447\u0430\u0441 \u0445\u043e\u0434\u0438\u0442 ".concat(a);break;case 0:t="\u041d\u0438\u0447\u044c\u044f!";break;default:t="\u041f\u043e\u0431\u0435\u0434\u0438\u043b ".concat(a)}return c.a.createElement("div",{style:i,className:"tableHeader"},c.a.createElement("div",{className:"curePlayerText"},t),c.a.createElement("button",{onClick:r,className:"btn btn-danger"},c.a.createElement("i",{className:"fa fa-times"})))}),b=function(e){var t=e.currentPlayer,n=e.field,a=e.columnAction,r=e.cellsToPulse,i=e.gameState,l=e.exitGame,o=e.isFieldBlocked,u=e.winner,s="tableField",f="tableRoot";return"setup"===i?f+=" disabled":("ended"===i||o)&&(s+=" notActive"),c.a.createElement("div",{className:f},c.a.createElement(p,{currentPlayer:t,exitGame:l,winner:u,style:{marginBottom:"5px"}}),c.a.createElement("div",{className:s},n.map((function(e,t){var n=r.filter((function(e){return e[0]===t}));return c.a.createElement(v,{key:t,id:t,columnAction:a,data:e,cellsToPulse:n})}))))},h=[],y=function(){return 1},g={start:0,maxTime:2e3},E=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},w=function(e){var t=0,n=y(h,r);if(n.isWin)return"draw"===n.isWin?0:n.winner===e?1e31:-1e31;if(j(1===e?2:1)>=0)return-1e31;for(var a=2;a<=r;a++)t+=(n=y(h,a,0)).filter((function(t){return t.winner===e})).length*Math.pow(10,5*a),t-=n.filter((function(t){return t.winner!==e})).length*Math.pow(10,a);return t},O=function(){var e=[];return h.forEach((function(t,n){var a=function(e){var t=e.findIndex((function(e){return e>0}));return(-1===t?e.length:t)-1}(t);a<0||e.push([n,a])})),e},j=function(e){var t=O(),n=!0,a=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var o=c.value;if(h[o[0]][o[1]]=e,y(h,r).isWin)return o[0];h[o[0]][o[1]]=0}}catch(u){a=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return-1},N=function(e,t,n,i){h=e,y=n,a=t,r=i,g.start=Date.now();var c=j(t);return c>=0?c:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>=1)return w(a);var r=-2e31,i=-1,c=O(),l=[],o=!0,u=!1,s=void 0;try{for(var f,m=c[Symbol.iterator]();!(o=(f=m.next()).done);o=!0){var d=f.value;h[d[0]][d[1]]=t;var v=e(1===t?2:1,n+1);r<v&&(l=[],r=v,i=d[0],l.push({val:r,col:i})),r===v&&l.push({val:r,col:d[0]}),h[d[0]][d[1]]=0}}catch(p){u=!0,s=p}finally{try{o||null==m.return||m.return()}finally{if(u)throw s}}return n?r:l[E(0,l.length-1)].col}(t)},k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0;a<t.length;a++)for(var r=a+1;r<t.length;r++)if(t[a]!==t[r])return!1;return!0},x=function(e,t,n){for(var a=[],r=t;r<n;r++)a.push([e,r]);return a},S=function(e,t,n,a){var r={arr:[],ind:[],role:"".concat(n," diagonal")};switch(n){case"left":n=0;break;case"right":n=1;break;default:n=-1}for(var i=n?0:Math.max(e-4,0),c=Math.min(e+4,a.length),l=Math.min(t+4,a[0].length),o=t,u=e;u>=i&&u<c&&o<l;n?u++:u--,o++)r.arr.push(a[u][o]),r.ind.push([u,o]);return r},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!0,r=[],i=!0,c=!1,l=void 0;try{for(var o,s=e.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var m=o.value,d=Object(f.a)(m,2),v=d[0],p=d[1],b=!0,h=!1,y=void 0;try{for(var g,E=function(){var i=g.value,c=(O=Object(f.a)(i,2))[0];O[1]<=0&&(a=!1);for(var l=0,o=[{arr:p.slice(c,c+t),ind:x(v,c,c+t),role:"column"},{arr:e.slice(v,v+t).map((function(e){return e[c]})),ind:x(c,v,v+t).map((function(e){return e.reverse()})),role:"row"},S(v,c,"right",e),S(v,c,"left",e)];l<o.length;l++){var s=o[l];if(-1===s.arr.findIndex((function(e){return e<=0}))&&s.arr.length===t&&k.apply(void 0,Object(u.a)(s.arr))&&(r.push({isWin:!0,winner:s.arr[0],indexes:s.ind}),n))return{v:r[0]}}},w=p.entries()[Symbol.iterator]();!(b=(g=w.next()).done);b=!0){var O,j=E();if("object"===typeof j)return j.v}}catch(N){h=!0,y=N}finally{try{b||null==w.return||w.return()}finally{if(h)throw y}}}}catch(N){c=!0,l=N}finally{try{i||null==s.return||s.return()}finally{if(c)throw l}}return a?{isWin:"draw",winner:0,indexes:x(0,0,e.length).map((function(e){return e.reverse()}))}:n?{isWin:!1}:r},C=(n(22),n(6)),M=n(7),A=n(9),T=n(8),G=n(10),B=(n(23),function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(A.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={filters:[]},n.filterChange=function(e){(n.props.options.find((function(e){return e.active}))||{id:-1}).id!==e&&n.props.onChange(e)},n}return Object(G.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{style:this.props.style,className:"buttonsContainer"},this.props.options.map((function(t,n,a){var r="btn";return t.active?r+=" btn-primary":r+=" btn-outline-secondary",n||(r+=" first"),n===a.length-1&&(r+=" last"),c.a.createElement("button",{key:t.id,className:r,onClick:function(){return e.filterChange(t.id)}},t.title)})))}}]),t}(c.a.Component)),W=function(e){var t,n=e.onGameModeChange,a=e.gameModes,r=e.gameState,i=void 0===r?"setup":r,l=e.toggleGameState,o="selectorRoot",u="btn";return"ended"===i?(u+=" btn-secondary",t=c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-repeat"})," \u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e")):"setup"===i&&(u+=" btn-success",t=c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-play"})," \u0418\u0433\u0440\u0430\u0442\u044c")),"is on"===i&&(o+=" disabled",u+=" btn-secondary",t=c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-repeat"})," \u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e")),c.a.createElement("div",{className:"headerRoot mb-3"},c.a.createElement("div",{className:"mb-1 launchRoot"},c.a.createElement("button",{onClick:l,className:u},t)),c.a.createElement("div",{className:o+" mb-1"},c.a.createElement("div",{className:"selectorText",style:{flexBasis:"40%"}},"\u0420\u0435\u0436\u0438\u043c \u0438\u0433\u0440\u044b:"),c.a.createElement(B,{onChange:n,options:a,style:{flexBasis:"60%"}})))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){var e,t,n={field:(e=7,t=6,Array(t).fill(Array(e).fill(0))),lastAction:"none",lastColumn:-1,lastHoverColumn:-1},a=Object(i.useState)([{id:0,title:c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-user"})," vs ",c.a.createElement("i",{className:"fa fa-desktop"})),alias:["player","ai"],active:!0},{id:1,title:c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-user"})," vs ",c.a.createElement("i",{className:"fa fa-user"})),alias:["player","player"],active:!1},{id:2,title:c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-desktop"})," vs ",c.a.createElement("i",{className:"fa fa-desktop"})),alias:["ai","ai"],active:!1}]),r=Object(f.a)(a,2),l=r[0],o=r[1],s=Object(i.useState)({}),m=Object(f.a)(s,2),d=m[0],v=m[1],p=Object(i.useState)(!0),h=Object(f.a)(p,2),y=h[0],g=h[1],E=Object(i.useState)({cellsToPulse:[],winner:-1}),w=Object(f.a)(E,2),O=w[0],j=w[1],k=Object(i.useState)(n),x=Object(f.a)(k,2),S=x[0],C=x[1],M=Object(i.useState)("setup"),A=Object(f.a)(M,2),T=A[0],G=A[1],B=Object(i.useState)(1),R=Object(f.a)(B,2),H=R[0],I=R[1];Object(i.useEffect)((function(){var e=l.find((function(e){return e.active})),t=e.id,n=e.alias;v({id:t,alias:n})}),[l]),Object(i.useEffect)((function(){"is on"===T&&q()}),[T]);var _=function(e){var t=e.findIndex((function(e){return e>0}));return(-1===t?e.length:t)-1},F=function(){j({cellsToPulse:[],winner:-1}),I(1),C(n)},J=function(){F(),G("setup")},L=function(e,t,n){return e.map((function(e,a){return e.map((function(e,r){return a===t[0]&&r===t[1]?n:function(e){return e<0?0:e}(e)}))}))},U=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=[e,_(S.field[e])];if(!(n[1]<0)&&!(S.field[n[0]][n[1]]>0&&"hideHint"===t)){var a=0;switch(t){case"action":a=H;break;case"hint":a=-H;break;case"hideHint":a=0;break;default:a=0}C({field:L(S.field,n,a),lastAction:t,lastColumn:"hint"===t?e:S.lastColumn})}};Object(i.useEffect)((function(){if("action"===S.lastAction){var e=P(S.field,4);e.isWin?function(e){var t=e.winner,n=e.indexes;G("ended"),j({cellsToPulse:n,winner:t})}(e):I(1===H?2:1)}}),[S]);var q=function(){if("is on"===T)switch(d.alias[H-1]){case"ai":g(!0),U(z(),"action");break;case"player":S.lastColumn>=0&&U(S.lastColumn,"hint"),g(!1);break;default:console.error("Unexpected player type: '".concat(d.alias[H-1],"'")),J()}};Object(i.useEffect)(q,[H]);var z=function(){return N(S.field.map((function(e){return Object(u.a)(e)})),H,P,4,(function(e){return U(e,"action")}))};return c.a.createElement("div",{className:"GameRoot"},c.a.createElement(W,{gameModes:l,onGameModeChange:function(e){o(l.map((function(t){return t.id===e?D({},t,{active:!0}):D({},t,{active:!1})})))},toggleGameState:function(){F(),G("is on")},gameState:T}),c.a.createElement(b,{columnAction:function(){U.apply(void 0,arguments)},winner:O.winner,currentPlayer:function(){if(void 0===d.alias)return"\xaf\\_(\u30c4)_/\xaf";switch(d.alias[H-1]){case"player":return"\u0418\u0433\u0440\u043e\u043a ".concat(H);case"ai":return"\u0418\u0418 \u2116".concat(H);default:return"\xaf\\_(\u30c4)_/\xaf"}}(),field:S.field,cellsToPulse:O.cellsToPulse,gameState:T,exitGame:J,isFieldBlocked:y}))},I=(n(24),function(){return c.a.createElement("div",{className:"appRoot"},c.a.createElement("div",{className:"leftBar"}),c.a.createElement(H,null),c.a.createElement("div",{className:"rightBar"}))});o.a.render(c.a.createElement(I,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.25fa1f68.chunk.js.map